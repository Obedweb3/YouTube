<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>HUNTER YT DOWNLOADER</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  background:linear-gradient(135deg,#000,#0a0f2e,#000);
  color:#fff;
  font-family:Inter,system-ui;
}
header{
  text-align:center;
  padding:20px;
  font-size:32px;
  font-weight:900;
  color:#00c8ff;
}
.search{
  display:flex;
  gap:10px;
  justify-content:center;
  padding:10px;
}
.search input{
  width:60%;
  padding:14px;
  border-radius:12px;
  border:none;
  background:#ffffff1a;
  color:white;
}
.search button{
  padding:14px 20px;
  border:none;
  border-radius:12px;
  background:#00c8ff;
  color:black;
  cursor:pointer;
}
#history{
  display:flex;
  gap:8px;
  padding:10px;
  overflow-x:auto;
}
.history-item{
  background:#ffffff1a;
  padding:6px 12px;
  border-radius:20px;
  cursor:pointer;
  white-space:nowrap;
}
#results{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
  gap:16px;
  padding:20px;
}
.card{
  background:#ffffff14;
  border-radius:16px;
  overflow:hidden;
}
.card img{
  width:100%;
  height:160px;
  object-fit:cover;
}
.info{
  padding:12px;
}
.info h3{
  font-size:14px;
}
.controls{
  display:flex;
  gap:8px;
  margin-top:8px;
}
.controls button, select{
  flex:1;
  padding:8px;
  border:none;
  border-radius:8px;
  cursor:pointer;
}
.preview{
  background:#ff004c;
  color:white;
}
.download{
  background:#22c55e;
}
#player{
  display:none;
  padding:20px;
}
iframe{
  width:100%;
  height:320px;
  border-radius:16px;
}
footer{
  text-align:center;
  padding:20px;
  color:#aaa;
}
</style>
</head>

<body>

<header>ðŸŽ§ HUNTER YT DOWNLOADER</header>

<div class="search">
  <input id="query" placeholder="Search song or video...">
  <button onclick="search()">Search</button>
</div>

<div id="history"></div>

<div id="player">
  <iframe id="frame" allowfullscreen></iframe>
</div>

<div id="results"></div>

<footer>Powered by Obed Tech</footer>

<script>
let history = JSON.parse(localStorage.getItem("history")||"[]");

function saveHistory(q){
  if(!history.includes(q)){
    history.unshift(q);
    history=history.slice(0,10);
    localStorage.setItem("history",JSON.stringify(history));
  }
  renderHistory();
}

function renderHistory(){
  const h=document.getElementById("history");
  h.innerHTML="";
  history.forEach(q=>{
    const d=document.createElement("div");
    d.className="history-item";
    d.textContent=q;
    d.onclick=()=>{document.getElementById("query").value=q;search();}
    h.appendChild(d);
  });
}
renderHistory();

async function search(){
  const q=document.getElementById("query").value.trim();
  if(!q)return alert("Enter a search term");
  saveHistory(q);

  document.getElementById("results").innerHTML="Loading...";
  const res=await fetch(`https://youtubeapi.obedtech.top/functions/v1/youtube-search?q=${encodeURIComponent(q)}`);
  const data=await res.json();
  const items=data.items||data.results||[];

  document.getElementById("results").innerHTML="";
  items.forEach(v=>{
    const url=v.url||v.video_url||v.link;
    const id=url?.split("v=")[1];
    const card=document.createElement("div");
    card.className="card";
    card.innerHTML=`
      <img src="${v.thumbnail}">
      <div class="info">
        <h3>${v.title}</h3>
        <select id="fmt-${id}">
          <option value="mp3-128">MP3 128kbps</option>
          <option value="mp3-320">MP3 320kbps</option>
          <option value="mp4-360">MP4 360p</option>
          <option value="mp4-720">MP4 720p</option>
        </select>
        <div class="controls">
          <button class="preview" onclick="preview('${id}')">Preview</button>
          <button class="download" onclick="download('${url}','fmt-${id}')">Download</button>
        </div>
      </div>`;
    document.getElementById("results").appendChild(card);
  });
}

function preview(id){
  document.getElementById("player").style.display="block";
  document.getElementById("frame").src=`https://www.youtube.com/embed/${id}`;
  window.scrollTo({top:0,behavior:"smooth"});
}

/* ðŸ”¥ REAL DOWNLOAD HANDLER */
function download(url,fmtId){
  const v=document.getElementById(fmtId).value.split("-");
  const type=v[0], quality=v[1];

  /* CHANGE THIS TO YOUR REAL CONVERTER API */
  const endpoint=`https://YOUR-DOWNLOADER-ENDPOINT/download?url=${encodeURIComponent(url)}&type=${type}&quality=${quality}`;

  window.open(endpoint,"_blank");
}
</script>

</body>
</html>
