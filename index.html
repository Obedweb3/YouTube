<!DOCTYPE html>
<html>
<head>
<title>HUNTER YT DOWNLOADER</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body{margin:0;background:#020617;color:#fff;font-family:Arial}
header{text-align:center;padding:20px;font-size:28px;color:#38bdf8}
input,button,select{padding:10px;border-radius:8px;border:none}
.search{display:flex;gap:10px;justify-content:center}
#results{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:15px;padding:20px}
.card{background:#020617ee;border:1px solid #38bdf822;border-radius:12px}
.card img{width:100%;height:150px;object-fit:cover}
.info{padding:10px}
button{cursor:pointer}
.preview{background:#ef4444;color:white}
.download{background:#22c55e;color:white}
iframe{width:100%;height:300px;border:none}
</style>
</head>

<body>

<header>ðŸŽµ HUNTER YT DOWNLOADER</header>

<div class="search">
<input id="q" placeholder="Search song or video">
<button onclick="search()">Search</button>
</div>

<div id="player"></div>
<div id="results"></div>

<script>
async function search(){
  const q=document.getElementById("q").value;
  const res=await fetch(`https://youtubeapi.obedtech.top/functions/v1/youtube-search?q=${encodeURIComponent(q)}`);
  const data=await res.json();
  const list=data.items||[];

  document.getElementById("results").innerHTML="";
  list.forEach(v=>{
    const url=v.url;
    const id=url.split("v=")[1];
    document.getElementById("results").innerHTML+=`
      <div class="card">
        <img src="${v.thumbnail}">
        <div class="info">
          <b>${v.title}</b><br><br>
          <select id="f-${id}">
            <option value="mp3-128">MP3 128</option>
            <option value="mp3-320">MP3 320</option>
            <option value="mp4-360">MP4 360p</option>
            <option value="mp4-720">MP4 720p</option>
          </select><br><br>
          <button class="preview" onclick="preview('${id}')">Preview</button>
          <button class="download" onclick="download('${url}','${id}')">Download</button>
        </div>
      </div>`;
  });
}

function preview(id){
  document.getElementById("player").innerHTML=
    `<iframe src="https://www.youtube.com/embed/${id}" allowfullscreen></iframe>`;
}

function download(url,id){
  const [type,quality]=document.getElementById("f-"+id).value.split("-");
  window.open(`http://localhost:3000/download?url=${encodeURIComponent(url)}&type=${type}&quality=${quality}`);
}
</script>

</body>
</html>
